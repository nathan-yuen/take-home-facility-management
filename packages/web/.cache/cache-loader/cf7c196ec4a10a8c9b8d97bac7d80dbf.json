{"remainingRequest":"/home/nathan/resq/resq/node_modules/ts-loader/index.js??ref--16-1!/home/nathan/resq/resq/packages/web/src/components/FacilityCard.tsx","dependencies":[{"path":"/home/nathan/resq/resq/packages/web/src/components/FacilityCard.tsx","mtime":1593449461299},{"path":"/home/nathan/resq/resq/node_modules/cache-loader/dist/cjs.js","mtime":1593200457581},{"path":"/home/nathan/resq/resq/node_modules/ts-loader/index.js","mtime":1593200459990}],"contextDependencies":[],"result":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { Card, CardContent, CardHeader, IconButton, Menu, MenuItem, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { MoreVert } from '@material-ui/icons';\nimport React, { useCallback, useMemo } from 'react';\nimport SizeChip from './SizeChip';\nvar useStyles = makeStyles({\n    root: {\n        minHeight: '180px',\n        '& b': {\n            background: '#009688'\n        }\n    }\n});\nvar renderHighlightSpan = function (text, range) {\n    if (range.length) {\n        return (React.createElement(React.Fragment, null,\n            text.substring(0, range[0]),\n            React.createElement(\"b\", null, text.substring(range[0], range[1])),\n            text.substring(range[1], text.length)));\n    }\n    else {\n        return text;\n    }\n};\nexport default function (props) {\n    var classes = useStyles();\n    var facility = props.facility, filterTextRegex = props.filterTextRegex, onEdit = props.onEdit, onRemove = props.onRemove;\n    var _a = props.facility, name = _a.name, address = _a.address, size = _a.size;\n    var _b = React.useState(null), anchorEl = _b[0], setAnchorEl = _b[1];\n    var open = Boolean(anchorEl);\n    var onEditClick = function () {\n        setAnchorEl(null);\n        onEdit(facility);\n    };\n    var onRemoveClick = function () {\n        setAnchorEl(null);\n        onRemove(facility);\n    };\n    var onActionsClose = useCallback(function () { return setAnchorEl(null); }, [setAnchorEl]);\n    var highlightRange = useMemo(function () {\n        var ranges = ['name', 'address'].reduce(function (merged, key) {\n            var _a;\n            var text = facility[key];\n            var matched = filterTextRegex && filterTextRegex.exec(text);\n            return __assign({}, merged, (_a = {}, _a[key] = matched ? [matched.index, matched.index + matched[0].length] : [], _a));\n        }, {});\n        return ranges;\n    }, [filterTextRegex, facility]);\n    return (React.createElement(Card, { className: classes.root },\n        React.createElement(CardHeader, { action: React.createElement(React.Fragment, null,\n                React.createElement(IconButton, { \"aria-label\": \"Actions\", onClick: function (event) { return setAnchorEl(event.currentTarget); } },\n                    React.createElement(MoreVert, null)),\n                React.createElement(Menu, { anchorEl: anchorEl, keepMounted: true, open: Boolean(anchorEl), onClose: onActionsClose, disableScrollLock: true },\n                    React.createElement(MenuItem, { onClick: onEditClick }, \"Edit\"),\n                    React.createElement(MenuItem, { onClick: onRemoveClick }, \"Remove\"))), title: React.createElement(Typography, { variant: \"h6\", color: \"textSecondary\", gutterBottom: true }, renderHighlightSpan(name, highlightRange['name'])), subheader: React.createElement(SizeChip, { size: size }) }),\n        React.createElement(CardContent, null,\n            React.createElement(Typography, { variant: \"body1\" }, renderHighlightSpan(address, highlightRange['address'])))));\n}\n",{"version":3,"file":"/home/nathan/resq/resq/packages/web/src/components/FacilityCard.tsx","sourceRoot":"","sources":["/home/nathan/resq/resq/packages/web/src/components/FacilityCard.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Card, CardContent, CardHeader, IconButton, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { MoreVert } from '@material-ui/icons';\r\nimport React, { useCallback, useMemo } from 'react';\r\nimport Facility from '../../typings/Facility';\r\nimport SizeChip from './SizeChip';\r\n\r\ninterface Props {\r\n  facility: Facility;\r\n  filterTextRegex: RegExp;\r\n  onEdit: (facility: Facility) => void;\r\n  onRemove: (facility: Facility) => void;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minHeight: '180px',\r\n    '& b': {\r\n      background: '#009688'\r\n    }\r\n  }\r\n});\r\n\r\nconst renderHighlightSpan = (text: string, range: number[]) => {\r\n  if (range.length) {\r\n    return (\r\n      <>\r\n        {text.substring(0, range[0])}\r\n        <b>{text.substring(range[0], range[1])}</b>\r\n        {text.substring(range[1], text.length)}\r\n      </>\r\n    );\r\n  } else {\r\n    return text;\r\n  }\r\n};\r\n\r\nexport default function(props: Props) {\r\n  const classes = useStyles();\r\n\r\n  const { facility, filterTextRegex, onEdit, onRemove } = props;\r\n  const { name, address, size } = props.facility;\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const onEditClick = () => {\r\n    setAnchorEl(null);\r\n    onEdit(facility);\r\n  };\r\n\r\n  const onRemoveClick = () => {\r\n    setAnchorEl(null);\r\n    onRemove(facility);\r\n  };\r\n\r\n  const onActionsClose = useCallback(() => setAnchorEl(null), [setAnchorEl]);\r\n\r\n  const highlightRange = useMemo(() => {\r\n    const ranges = ['name', 'address'].reduce((merged, key) => {\r\n      const text = facility[key];\r\n      const matched = filterTextRegex && filterTextRegex.exec(text);\r\n      return {\r\n        ...merged,\r\n        [key]: matched ? [matched.index, matched.index + matched[0].length] : []\r\n      };\r\n    }, {});\r\n\r\n    return ranges;\r\n  }, [filterTextRegex, facility]);\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardHeader\r\n        action={\r\n          <>\r\n            <IconButton aria-label=\"Actions\" onClick={event => setAnchorEl(event.currentTarget)}>\r\n              <MoreVert />\r\n            </IconButton>\r\n            <Menu\r\n              anchorEl={anchorEl}\r\n              keepMounted\r\n              open={Boolean(anchorEl)}\r\n              onClose={onActionsClose}\r\n              disableScrollLock={true}\r\n            >\r\n              <MenuItem onClick={onEditClick}>Edit</MenuItem>\r\n              <MenuItem onClick={onRemoveClick}>Remove</MenuItem>\r\n            </Menu>\r\n          </>\r\n        }\r\n        title={\r\n          <Typography variant=\"h6\" color=\"textSecondary\" gutterBottom>\r\n            {renderHighlightSpan(name, highlightRange['name'])}\r\n          </Typography>\r\n        }\r\n        subheader={<SizeChip size={size} />}\r\n      />\r\n      <CardContent>\r\n        <Typography variant=\"body1\">{renderHighlightSpan(address, highlightRange['address'])}</Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"]}]}